<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: cocktail.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: cocktail.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>const fetch = require('node-fetch');

const url_searchByIngredient = "https://www.thecocktaildb.com/api/json/v1/1/filter.php?i={ingredient}";
const url_lookupById = "https://www.thecocktaildb.com/api/json/v1/1/lookup.php?i={id}";

/**
 * Make a search request to the cocktail api
 *
 * @param {String} ingredient - ingredient contained in the cocktail
 * @returns a json object containing an array of cocktail objects (names, IDs &amp; url to thumbnail)
 * @returns null if the ingredient is not found
 */
async function searchByIngredient(ingredient) {
  try {
    const res = await fetch(url_searchByIngredient.replace("{ingredient}", ingredient))
    const json = await res.json();
    return json;
  } catch (err) {
    console.error(err);
    return null;
  }
}

/**
 * Get the details on a cocktail using its ID
 *
 * @param {*} id - id of the cocktail in the API's database
 * @returns a JSON object with details about the cocktail
 */
async function lookupById(id) {
  const json = await fetch(url_lookupById.replace("{id}", id))
    .then(function(response){ return response.json(); })
    .catch((error) => { return JSON.stringify({'status': 400}) });
  try {
    ret_obj = Object();
    ret_obj["id"] = json.drinks[0].idDrink;
    ret_obj["name"] = json.drinks[0].strDrink;
    ret_obj["alcoholic"] = json.drinks[0].strAlcoholic;
    ret_obj["glass"] = json.drinks[0].strGlass;
    ret_obj["instructions"] = json.drinks[0].strInstructions;
    ret_obj["thumbnail"] = json.drinks[0].strDrinkThumb;
    ret_obj["ingredients"] = [json.drinks[0].strIngredient1,
      json.drinks[0].strIngredient2, json.drinks[0].strIngredient3,
      json.drinks[0].strIngredient4, json.drinks[0].strIngredient5,
      json.drinks[0].strIngredient6, json.drinks[0].strIngredient7,
      json.drinks[0].strIngredient8, json.drinks[0].strIngredient9,
      json.drinks[0].strIngredient10, json.drinks[0].strIngredient11,
      json.drinks[0].strIngredient12, json.drinks[0].strIngredient13,
      json.drinks[0].strIngredient14, json.drinks[0].strIngredient15];
    ret_obj["ingredients"] = ret_obj["ingredients"].filter( (el) => {
      return el != null;
    });
    ret_obj["measures"] = [json.drinks[0].strMeasure1,
      json.drinks[0].strMeasure2, json.drinks[0].strMeasure3,
      json.drinks[0].strMeasure4, json.drinks[0].strMeasure5,
      json.drinks[0].strMeasure6, json.drinks[0].strMeasure7,
      json.drinks[0].strMeasure8, json.drinks[0].strMeasure9,
      json.drinks[0].strMeasure10, json.drinks[0].strMeasure11,
      json.drinks[0].strMeasure12, json.drinks[0].strMeasure13,
      json.drinks[0].strMeasure14, json.drinks[0].strMeasure15];
    ret_obj["measures"] = ret_obj["measures"].filter( (el) => {
        return el != null;
    });
    return ret_obj;
  } catch {
    return json;
  }
}

module.exports.searchByIngredient = searchByIngredient;
module.exports.lookupById = lookupById;</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#_createClient">_createClient</a></li><li><a href="global.html#compareHash">compareHash</a></li><li><a href="global.html#createHash">createHash</a></li><li><a href="global.html#fromCity">fromCity</a></li><li><a href="global.html#getAPOD">getAPOD</a></li><li><a href="global.html#getCuriosityPhoto">getCuriosityPhoto</a></li><li><a href="global.html#getRandom">getRandom</a></li><li><a href="global.html#getRandomCategory">getRandomCategory</a></li><li><a href="global.html#googleAuthManagement">googleAuthManagement</a></li><li><a href="global.html#logInNative">logInNative</a></li><li><a href="global.html#lookupById">lookupById</a></li><li><a href="global.html#newHtmlMail">newHtmlMail</a></li><li><a href="global.html#newTxtMail">newTxtMail</a></li><li><a href="global.html#parse_search_response">parse_search_response</a></li><li><a href="global.html#query">query</a></li><li><a href="global.html#search">search</a></li><li><a href="global.html#searchByIngredient">searchByIngredient</a></li><li><a href="global.html#send">send</a></li><li><a href="global.html#signInNative">signInNative</a></li><li><a href="global.html#topNews">topNews</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.6</a> on Sun Nov 29 2020 17:59:34 GMT+0100 (Central European Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
